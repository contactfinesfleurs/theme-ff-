{%- unless request.page_type == 'index' or request.page_type == 'password' -%}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": {{ shop.name | json }},
      "item": {{ shop.url | json }}
    }
    {%- if request.page_type == 'collection' -%}
    ,{
      "@type": "ListItem",
      "position": 2,
      "name": {{ collection.title | json }},
      "item": {{ shop.url | append: collection.url | json }}
    }
    {%- elsif request.page_type == 'product' -%}
      {%- if product.collections.size > 0 -%}
        {%- assign main_collection = product.collections | first -%}
    ,{
      "@type": "ListItem",
      "position": 2,
      "name": {{ main_collection.title | json }},
      "item": {{ shop.url | append: main_collection.url | json }}
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": {{ product.title | json }},
      "item": {{ shop.url | append: product.url | json }}
    }
      {%- else -%}
    ,{
      "@type": "ListItem",
      "position": 2,
      "name": {{ product.title | json }},
      "item": {{ shop.url | append: product.url | json }}
    }
      {%- endif -%}
    {%- elsif request.page_type == 'article' -%}
    ,{
      "@type": "ListItem",
      "position": 2,
      "name": {{ blog.title | json }},
      "item": {{ shop.url | append: blog.url | json }}
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": {{ article.title | json }},
      "item": {{ shop.url | append: article.url | json }}
    }
    {%- elsif request.page_type == 'blog' -%}
    ,{
      "@type": "ListItem",
      "position": 2,
      "name": {{ blog.title | json }},
      "item": {{ shop.url | append: blog.url | json }}
    }
    {%- elsif request.page_type == 'page' -%}
    ,{
      "@type": "ListItem",
      "position": 2,
      "name": {{ page.title | json }},
      "item": {{ shop.url | append: page.url | json }}
    }
    {%- elsif request.page_type == 'list-collections' -%}
    ,{
      "@type": "ListItem",
      "position": 2,
      "name": {{ 'general.breadcrumbs.collections' | t | default: 'Collections' | json }},
      "item": {{ shop.url | append: routes.collections_url | json }}
    }
    {%- endif -%}
  ]
}
</script>
{%- endunless -%}
