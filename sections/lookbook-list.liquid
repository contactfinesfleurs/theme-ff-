<style>
.lookbook-list[data-shopify-id='{{ section.id }}'] {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
  overflow: hidden;
  margin-top: {{ section.settings.top_spacing }}px;
  margin-bottom: {{ section.settings.bottom_spacing }}px;
  background-color: {{ section.settings.background_color }};
  display: flex;
  flex-direction: column;
  padding: 2rem 0;
  height: auto;
}

.lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 2rem;
}

.lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__section-title {
  font-size: {{ section.settings.section_title_size_desktop }}px;
  margin: 0;
  color: {{ section.settings.section_title_color }};
  font-weight: {% if section.settings.section_title_weight %} 700 {% else %} 500 {% endif %};
}

.lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__grid {
  display: flex;
  gap: {{ section.settings.gap }}px;
  overflow-x: auto;
  scrollbar-width: thin;
  
  padding: 1rem 2rem;
  flex: 1;
  margin-top: {{ section.settings.header_grid_spacing }}px;
}

.lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__grid::-webkit-scrollbar {
  height: 4px;
}

.lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__grid::-webkit-scrollbar-track {
  margin: 0 2rem;
}

.lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__grid::-webkit-scrollbar-thumb {
  border-radius: 2px;
}

.lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__item {
  flex: 0 0 auto;
  display: flex;
  flex-direction: column;
}

.lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__image-wrapper {
  position: relative;
  display: inline-block;
  height: 600px;
  min-height: 600px;
  overflow: hidden;
  border-radius: {{ section.settings.image_border_radius }}px;
}

.lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__image {
  width: auto;
  height: 100%;
  display: block;
  object-fit: cover;
  object-position: center;
}

.lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__content {
  max-width: var(--image-width);
  padding: 1rem 0;
}

.lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__title {
  font-size: {{ section.settings.lookbook_title_size_desktop }}px;
  margin: 0;
  color: {{ section.settings.title_color }};
  text-decoration: none;
  width: auto;
  max-width: 100%;
  margin-top: 1rem;
  font-weight: {% if section.settings.title_weight %} 700 {% else %} 500 {% endif %};
}

.lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__description {
  font-size: {{ section.settings.description_size_desktop }}px;
  margin: 0.5rem 0 0;
  color: {{ section.settings.description_color }};
  width: auto;
  max-width: 700px;
}

.lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__link {
  text-decoration: none;
  color: inherit;
  display: block;
  width: fit-content;
}

.lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__image {
  transition: transform 0.3s ease;
}

.lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__link:hover .lookbook-list__image {
  transform: scale(1.02);
}

.lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__item:last-child {
  padding-right: 5rem;
}

@media screen and (max-width: 768px) {
  .lookbook-list[data-shopify-id='{{ section.id }}'] {
    margin-top: {{ section.settings.top_spacing_mobile }}px;
    margin-bottom: {{ section.settings.bottom_spacing_mobile }}px;
    height: auto;
    display: block;
  }
  
  .lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__grid {
    flex-direction: column;
    gap: {{ section.settings.gap_mobile }}px;
    padding-right: 2rem;
    overflow: visible;
    height: auto;
    flex: none;
  }
  
  .lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__item {
    width: 100%;
    position: relative;
    overflow: visible;
  }

  .lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__image-wrapper {
    height: auto;
    width: 100%;
    position: relative;
    display: block;
    min-height: 200px;
  }

  .lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__image {
    width: 100%;
    height: auto;
    display: block;
    position: relative;
  }

  .lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__content {
    max-width: 100%;
    padding: 1rem 0;
  }

  .lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__item:last-child {
    padding-right: 0;
  }

  /* Hide items beyond the mobile limit */
  {% if section.settings.mobile_item_limit != 'all' %}
    .lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__item:nth-child(n + {{ section.settings.mobile_item_limit | plus: 1 }}) {
      display: none;
    }
  {% endif %}

  .lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__controls {
    display: none;
  }

  .lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__title {
    font-size: {{ section.settings.lookbook_title_size_mobile }}px;
  }

  .lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__section-title {
    font-size: {{ section.settings.section_title_size_mobile }}px;
  }

  .lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__description {
    font-size: {{ section.settings.description_size_mobile }}px;
  }
}

@media screen and (min-width: 2000px) {
  {% if section.settings.section_height == 'auto' %}

  .lookbook-list[data-shopify-id='{{ section.id }}'] .lookbook-list__image-wrapper {
      height: 750px;
      margin-left: auto;
  }
{% endif %}

}


</style>

<div class="lookbook-list" data-shopify-id="{{ section.id }}">
  <div class="lookbook-list__header">
    {% if section.settings.title != blank %}
      <h2 class="lookbook-list__section-title">{{ section.settings.title }}</h2>
    {% endif %}
  </div>
  
  <div class="lookbook-list__grid">
    {%- for block in section.blocks -%}
      <div class="lookbook-list__item" {{ block.shopify_attributes }}>
        <a href="{{ block.settings.link }}" class="lookbook-list__link">
          <div class="lookbook-list__image-wrapper">
            {%- if block.settings.image != blank -%}
              <img
                srcset="{%- if block.settings.image.width >= 200 -%}{{ block.settings.image | image_url: width: 200 }} 200w,{%- endif -%}
                  {%- if block.settings.image.width >= 400 -%}{{ block.settings.image | image_url: width: 400 }} 400w,{%- endif -%}
                  {%- if block.settings.image.width >= 600 -%}{{ block.settings.image | image_url: width: 600 }} 600w,{%- endif -%}"
                src="{{ block.settings.image | image_url: width: 400 }}"
                loading="lazy"
                class="lookbook-list__image"
                alt="{{ block.settings.image.alt | escape }}"
                width="{{ block.settings.image.width }}"
                height="{{ block.settings.image.height }}"
              >
            {% else %}
              {% assign default_image_index = forloop.index | modulo: 4 | plus: 1 %}
              <img
                src="{{ 'lookbook-' | append: default_image_index | append: '.jpg' | asset_img_url: 'master' }}"
                loading="lazy"
                class="lookbook-list__image"
                alt="{{ block.settings.title | escape }}"
                width="{{ block.settings.image.width }}"
                height="{{ block.settings.image.height }}"
              >
            {% endif %}
          </div>
          
          <div class="lookbook-list__content">
            {% if block.settings.description != blank %}
            <h3 class="lookbook-list__title">{{ block.settings.title }}</h3>
              <p class="lookbook-list__description">{{ block.settings.description }}</p>
            {% endif %}
          </div>
        </a>
      </div>
    {%- endfor -%}
  </div>
</div>


{% schema %}
    {
      "name": "Collection List",
      "settings": [
        {
          "type": "header",
          "content": "Content & Data"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Section Title",
          "default": "COLLECTIONS/LOOKBOOKS TITLE"
        },
    
        {
          "type": "header",
          "content": "Layout & Display"
        },
        {
          "type": "select",
          "id": "mobile_item_limit",
          "label": "Number of Items to Show on Mobile",
          "options": [
            {
              "value": "1",
              "label": "1 Item"
            },
            {
              "value": "2",
              "label": "2 Items"
            },
            {
              "value": "3",
              "label": "3 Items"
            },
            {
              "value": "4",
              "label": "4 Items"
            },
            {
              "value": "6",
              "label": "6 Items"
            },
            {
              "value": "8",
              "label": "8 Items"
            },
            {
              "value": "all",
              "label": "Show All"
            }
          ],
          "default": "all",
          "info": "Control how many lookbooks appear on mobile devices"
        },
    
        {
          "type": "header",
          "content": "Typography"
        },
        {
          "type": "range",
          "id": "section_title_size_desktop",
          "min": 12,
          "max": 50,
          "step": 1,
          "unit": "px",
          "label": "Section Title Size - Desktop",
          "default": 16
        },
        {
          "type": "range",
          "id": "section_title_size_mobile",
          "min": 12,
          "max": 30,
          "step": 1,
          "unit": "px",
          "label": "Section Title Size - Mobile",
          "default": 14
        },
        
        {
          "type": "range",
          "id": "lookbook_title_size_desktop",
          "min": 12,
          "max": 24,
          "step": 1,
          "unit": "px",
          "label": "Lookbook Title Size - Desktop",
          "default": 14
        },
        {
          "type": "range",
          "id": "lookbook_title_size_mobile",
          "min": 12,
          "max": 30,
          "step": 1,
          "unit": "px",
          "label": "Lookbook Title Size - Mobile",
          "default": 12
        },
        {
          "type": "range",
          "id": "description_size_desktop",
          "min": 12,
          "max": 24,
          "step": 1,
          "unit": "px",
          "label": "Description Size - Desktop",
          "default": 14
        },
        {
          "type": "range",
          "id": "description_size_mobile",
          "min": 12,
          "max": 20,
          "step": 1,
          "unit": "px",
          "label": "Description Size - Mobile",
          "default": 12
        },
        {
          "type": "checkbox",
          "id": "section_title_weight",
          "label": "Bold Section Title",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "title_weight",
          "label": "Bold Lookbook Title",
          "default": false
        },
        {
          "type": "header",
          "content": "Colors"
        },
        {
          "type": "color",
          "id": "background_color",
          "label": "Background Color",
          "default": "#FFFFFF"
        },
        {
          "type": "color",
          "id": "section_title_color",
          "label": "Section Title Color",
          "default": "#000000"
        },
        {
          "type": "color",
          "id": "title_color",
          "label": "Lookbook Title Color",
          "default": "#000000"
        },
        {
          "type": "color",
          "id": "description_color",
          "label": "Description Color",
          "default": "#655555"
        },
    
        {
          "type": "header",
          "content": "Styling"
        },
        {
          "type": "range",
          "id": "image_border_radius",
          "min": 0,
          "max": 40,
          "step": 2,
          "unit": "px",
          "label": "Round Image Corners",
          "default": 0,
          "info": "Rounds the corners of all lookbook images"
        },
        {
          "type": "header",
          "content": "Spacing"
        },
        {
          "type": "range",
          "id": "top_spacing",
          "min": 0,
          "max": 200,
          "step": 2,
          "unit": "px",
          "label": "Top Spacing (Desktop)",
          "default": 20
        },
        {
          "type": "range",
          "id": "bottom_spacing",
          "min": 0,
          "max": 200,
          "step": 2,
          "unit": "px",
          "label": "Bottom Spacing (Desktop)",
          "default": 20
        },
        {
          "type": "range",
          "id": "top_spacing_mobile",
          "min": 0,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Top Spacing (Mobile)",
          "default": 16
        },
        {
          "type": "range",
          "id": "bottom_spacing_mobile",
          "min": 0,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Bottom Spacing (Mobile)",
          "default": 16
        },
        {
          "type": "range",
          "id": "header_grid_spacing",
          "min": 8,
          "max": 80,
          "step": 4,
          "unit": "px",
          "label": "Space Between Header and Lookbooks",
          "default": 32,
          "info": "Adjust the vertical space between section header and lookbook grid"
        },
        {
          "type": "range",
          "id": "gap",
          "min": 16,
          "max": 100,
          "step": 4,
          "unit": "px",
          "label": "Gap Between Items - Desktop",
          "default": 32
        },
        {
          "type": "range",
          "id": "gap_mobile",
          "min": 8,
          "max": 60,
          "step": 4,
          "unit": "px",
          "label": "Gap Between Items - Mobile",
          "default": 16
        }
      ],
      "blocks": [
        {
          "type": "collection",
          "name": "Collection",
          "settings": [
            {
              "type": "image_picker",
              "id": "image",
              "label": "Cover Image"
            },
            {
              "type": "text",
              "id": "title",
              "label": "Title",
              "default": "Collection Title"
            },
            {
              "type": "textarea",
              "id": "description",
              "label": "Description",
              "default": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."
            },
            {
              "type": "url",
              "id": "link",
              "label": "Lookbook Link"
            }
          ]
        }
      ],
      "presets": [
        {
          "name": "Collection List",
          "blocks": [
            {
              "type": "collection"
            },
            {
              "type": "collection"
            },
            {
              "type": "collection"
            },
            {
              "type": "collection"
            }
          ]
        }
      ]
    }
    {% endschema %}
